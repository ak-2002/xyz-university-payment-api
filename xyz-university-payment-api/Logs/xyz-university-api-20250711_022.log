2025-07-11 14:43:57.893 +03:00 [INF] Ensuring database is created {"MachineName":"DESKTOP-F3AMJ10","ThreadId":1,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:43:59.649 +03:00 [INF] Database created successfully {"MachineName":"DESKTOP-F3AMJ10","ThreadId":1,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:43:59.653 +03:00 [INF] Seeding default roles and permissions {"MachineName":"DESKTOP-F3AMJ10","ThreadId":1,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:44:00.194 +03:00 [INF] Valid data already seeded, skipping seeding process {"SourceContext":"xyz_university_payment_api.Core.Application.Services.AuthorizationService","MachineName":"DESKTOP-F3AMJ10","ThreadId":8,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:44:00.201 +03:00 [INF] Default roles and permissions seeded successfully {"MachineName":"DESKTOP-F3AMJ10","ThreadId":8,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:44:00.406 +03:00 [INF] XYZ University Payment API started successfully {"MachineName":"DESKTOP-F3AMJ10","ThreadId":8,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:44:00.548 +03:00 [INF] Configured endpoint PaymentMessage, Consumer: xyz_university_payment_api.Core.Application.Services.PaymentMessageConsumer {"SourceContext":"MassTransit","MachineName":"DESKTOP-F3AMJ10","ThreadId":8,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:44:00.560 +03:00 [INF] Configured endpoint PaymentFailedMessage, Consumer: xyz_university_payment_api.Core.Application.Services.PaymentFailedMessageConsumer {"SourceContext":"MassTransit","MachineName":"DESKTOP-F3AMJ10","ThreadId":8,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:44:00.914 +03:00 [INF] Bus started: "rabbitmq://localhost/" {"SourceContext":"MassTransit","MachineName":"DESKTOP-F3AMJ10","ThreadId":14,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:45:51.306 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. {"EventId":{"Id":20504,"Name":"Microsoft.EntityFrameworkCore.Query.MultipleCollectionIncludeWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"639ba68b-f669-4d96-9204-f32f901bcc9f","ActionName":"xyz_university_payment_api.Presentation.Controllers.AuthorizationController.Login (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KA:00000004","RequestPath":"/api/Authorization/login","ConnectionId":"0HNE0E1SUQ5KA","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:45:51.349 +03:00 [INF] Generated access token for user admin with 1 roles and 16 permissions {"SourceContext":"xyz_university_payment_api.Core.Application.Services.JwtTokenService","ActionId":"639ba68b-f669-4d96-9204-f32f901bcc9f","ActionName":"xyz_university_payment_api.Presentation.Controllers.AuthorizationController.Login (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KA:00000004","RequestPath":"/api/Authorization/login","ConnectionId":"0HNE0E1SUQ5KA","MachineName":"DESKTOP-F3AMJ10","ThreadId":3,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:45:51.557 +03:00 [INF] V3 GetAdminStats endpoint called {"SourceContext":"xyz_university_payment_api.Presentation.Controllers.V3.DashboardController","ActionId":"c82fe2e1-8ddd-4022-9ff0-4bc691ca5779","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.DashboardController.GetAdminStats (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5K9:00000004","RequestPath":"/api/v3/Dashboard/admin-stats","ConnectionId":"0HNE0E1SUQ5K9","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:45:51.564 +03:00 [INF] Retrieving all students {"SourceContext":"xyz_university_payment_api.Core.Application.Services.StudentService","ActionId":"c82fe2e1-8ddd-4022-9ff0-4bc691ca5779","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.DashboardController.GetAdminStats (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5K9:00000004","RequestPath":"/api/v3/Dashboard/admin-stats","ConnectionId":"0HNE0E1SUQ5K9","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:45:51.636 +03:00 [INF] Retrieving all payments {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"c82fe2e1-8ddd-4022-9ff0-4bc691ca5779","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.DashboardController.GetAdminStats (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5K9:00000004","RequestPath":"/api/v3/Dashboard/admin-stats","ConnectionId":"0HNE0E1SUQ5K9","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:45:51.681 +03:00 [INF] V3 GetAdminStats endpoint called {"SourceContext":"xyz_university_payment_api.Presentation.Controllers.V3.DashboardController","ActionId":"c82fe2e1-8ddd-4022-9ff0-4bc691ca5779","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.DashboardController.GetAdminStats (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KA:00000006","RequestPath":"/api/v3/Dashboard/admin-stats","ConnectionId":"0HNE0E1SUQ5KA","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:45:51.690 +03:00 [INF] Retrieving all students {"SourceContext":"xyz_university_payment_api.Core.Application.Services.StudentService","ActionId":"c82fe2e1-8ddd-4022-9ff0-4bc691ca5779","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.DashboardController.GetAdminStats (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KA:00000006","RequestPath":"/api/v3/Dashboard/admin-stats","ConnectionId":"0HNE0E1SUQ5KA","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:45:51.696 +03:00 [INF] Retrieving all payments {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"c82fe2e1-8ddd-4022-9ff0-4bc691ca5779","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.DashboardController.GetAdminStats (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KA:00000006","RequestPath":"/api/v3/Dashboard/admin-stats","ConnectionId":"0HNE0E1SUQ5KA","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:12.983 +03:00 [INF] V3 GetAllPayments endpoint called with page 1 {"SourceContext":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:12.996 +03:00 [INF] Retrieving all payments with student information {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.003 +03:00 [INF] Current user role: Admin, User ID: 1 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.024 +03:00 [INF] Retrieved 8 payments for Admin {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.037 +03:00 [INF] Retrieved 9 students for lookup {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.041 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"} {"SourceContext":"xyz_university_payment_api.Core.Application.Services.StudentService","ActionId":"dc159eba-f102-49bd-801d-680abf7b9643","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.StudentControllerV3.GetStudents (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000002","RequestPath":"/api/v3/StudentControllerV","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":26,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.052 +03:00 [INF] Payment 1 for student S12345, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.057 +03:00 [INF] Current user role: Admin, User ID: 1 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.StudentService","ActionId":"dc159eba-f102-49bd-801d-680abf7b9643","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.StudentControllerV3.GetStudents (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000002","RequestPath":"/api/v3/StudentControllerV","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":26,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.067 +03:00 [INF] Payment 2 for student S67890, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.075 +03:00 [INF] Payment 3 for student S66004, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.080 +03:00 [INF] Payment 4 for student S66001, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.087 +03:00 [INF] Payment 5 for student S660066, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.093 +03:00 [INF] Payment 6 for student S660088, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.098 +03:00 [INF] Payment 7 for student S660099, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.105 +03:00 [INF] Payment 8 for student S660099, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.111 +03:00 [INF] Returning 8 payment DTOs {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KD:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KD","MachineName":"DESKTOP-F3AMJ10","ThreadId":10,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.134 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"} {"SourceContext":"xyz_university_payment_api.Core.Application.Services.StudentService","ActionId":"dc159eba-f102-49bd-801d-680abf7b9643","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.StudentControllerV3.GetStudents (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KB:00000002","RequestPath":"/api/v3/StudentControllerV","ConnectionId":"0HNE0E1SUQ5KB","MachineName":"DESKTOP-F3AMJ10","ThreadId":3,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.138 +03:00 [INF] V3 GetAllPayments endpoint called with page 1 {"SourceContext":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":26,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.157 +03:00 [INF] Retrieving all payments with student information {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":26,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.157 +03:00 [INF] Current user role: Admin, User ID: 1 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.StudentService","ActionId":"dc159eba-f102-49bd-801d-680abf7b9643","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.StudentControllerV3.GetStudents (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KB:00000002","RequestPath":"/api/v3/StudentControllerV","ConnectionId":"0HNE0E1SUQ5KB","MachineName":"DESKTOP-F3AMJ10","ThreadId":3,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.167 +03:00 [INF] Current user role: Admin, User ID: 1 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":26,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.176 +03:00 [INF] Retrieved 8 payments for Admin {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":26,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.183 +03:00 [INF] Retrieved 9 students for lookup {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.188 +03:00 [INF] Payment 1 for student S12345, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.194 +03:00 [INF] Payment 2 for student S67890, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.200 +03:00 [INF] Payment 3 for student S66004, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.205 +03:00 [INF] Payment 4 for student S66001, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.210 +03:00 [INF] Payment 5 for student S660066, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.215 +03:00 [INF] Payment 6 for student S660088, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.220 +03:00 [INF] Payment 7 for student S660099, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.225 +03:00 [INF] Payment 8 for student S660099, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:46:13.230 +03:00 [INF] Returning 8 payment DTOs {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KE:00000003","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KE","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.013 +03:00 [INF] V3 CreatePayment endpoint called with reference: REF0299 {"SourceContext":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController","ActionId":"3f4b87b8-4e5f-4126-9b23-cf4172c1c625","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KF:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KF","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.026 +03:00 [INF] Processing payment: REF0299 for student: S660099 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"3f4b87b8-4e5f-4126-9b23-cf4172c1c625","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KF:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KF","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.095 +03:00 [INF] Payment processed successfully: REF0299 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"3f4b87b8-4e5f-4126-9b23-cf4172c1c625","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KF:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KF","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.103 +03:00 [INF] Publishing payment processed message: REF0299 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.RabbitMQMessagePublisher","ActionId":"3f4b87b8-4e5f-4126-9b23-cf4172c1c625","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KF:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KF","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.234 +03:00 [INF] Successfully published payment processed message: REF0299 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.RabbitMQMessagePublisher","ActionId":"3f4b87b8-4e5f-4126-9b23-cf4172c1c625","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KF:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KF","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.252 +03:00 [INF] V3 GetAllPayments endpoint called with page 1 {"SourceContext":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.253 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"} {"SourceContext":"xyz_university_payment_api.Core.Application.Services.StudentService","ActionId":"dc159eba-f102-49bd-801d-680abf7b9643","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.StudentControllerV3.GetStudents (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KF:00000004","RequestPath":"/api/v3/StudentControllerV","ConnectionId":"0HNE0E1SUQ5KF","MachineName":"DESKTOP-F3AMJ10","ThreadId":17,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.264 +03:00 [INF] Processing payment message: REF0299 for student: S660099 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentMessageConsumer","MachineName":"DESKTOP-F3AMJ10","ThreadId":13,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.265 +03:00 [INF] Retrieving all payments with student information {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.272 +03:00 [INF] Current user role: Admin, User ID: 1 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.StudentService","ActionId":"dc159eba-f102-49bd-801d-680abf7b9643","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.StudentControllerV3.GetStudents (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KF:00000004","RequestPath":"/api/v3/StudentControllerV","ConnectionId":"0HNE0E1SUQ5KF","MachineName":"DESKTOP-F3AMJ10","ThreadId":17,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.281 +03:00 [INF] Current user role: Admin, User ID: 1 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.283 +03:00 [INF] Sending payment receipt email to awkiiru@usiu.ac.ke for payment REF0299 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.EmailService","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.291 +03:00 [INF] Retrieved 9 payments for Admin {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.298 +03:00 [INF] Retrieved 9 students for lookup {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.303 +03:00 [INF] Payment 1 for student S12345, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.307 +03:00 [INF] Payment 2 for student S67890, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.313 +03:00 [INF] Payment 3 for student S66004, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.318 +03:00 [INF] Payment 4 for student S66001, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.322 +03:00 [INF] Payment 5 for student S660066, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.327 +03:00 [INF] Payment 6 for student S660088, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.332 +03:00 [INF] Payment 7 for student S660099, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.337 +03:00 [INF] Payment 8 for student S660099, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.342 +03:00 [INF] Payment 9 for student S660099, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.347 +03:00 [INF] Returning 9 payment DTOs {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KG:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KG","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.393 +03:00 [ERR] Error sending email to awkiiru@usiu.ac.ke {"SourceContext":"xyz_university_payment_api.Core.Application.Services.EmailService","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
System.Net.Http.HttpRequestException: No such host is known. (api.sendgrid.com:443)
 ---> System.Net.Sockets.SocketException (11001): No such host is known.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at SendGrid.Helpers.Reliability.RetryDelegatingHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SendGrid.BaseClient.MakeRequest(HttpRequestMessage request, CancellationToken cancellationToken)
   at SendGrid.BaseClient.RequestAsync(Method method, String requestBody, String queryParams, String urlPath, CancellationToken cancellationToken)
   at SendGrid.BaseClient.SendEmailAsync(SendGridMessage msg, CancellationToken cancellationToken)
   at xyz_university_payment_api.Core.Application.Services.EmailService.SendEmailAsync(String toEmail, String subject, String content) in C:\Users\wanja\Desktop\jj\xyz-university-payment-api\xyz-university-payment-api\Core\Application\Services\EmailService.cs:line 132
2025-07-11 14:47:44.421 +03:00 [WRN] Failed to send payment receipt email for payment: REF0299 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentMessageConsumer","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.425 +03:00 [INF] Sending payment confirmation email to awkiiru@usiu.ac.ke for payment REF0299 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.EmailService","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 14:47:44.430 +03:00 [ERR] Error sending email to awkiiru@usiu.ac.ke {"SourceContext":"xyz_university_payment_api.Core.Application.Services.EmailService","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
System.Net.Http.HttpRequestException: No such host is known. (api.sendgrid.com:443)
 ---> System.Net.Sockets.SocketException (11001): No such host is known.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.AddHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at SendGrid.Helpers.Reliability.RetryDelegatingHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SendGrid.BaseClient.MakeRequest(HttpRequestMessage request, CancellationToken cancellationToken)
   at SendGrid.BaseClient.RequestAsync(Method method, String requestBody, String queryParams, String urlPath, CancellationToken cancellationToken)
   at SendGrid.BaseClient.SendEmailAsync(SendGridMessage msg, CancellationToken cancellationToken)
   at xyz_university_payment_api.Core.Application.Services.EmailService.SendEmailAsync(String toEmail, String subject, String content) in C:\Users\wanja\Desktop\jj\xyz-university-payment-api\xyz-university-payment-api\Core\Application\Services\EmailService.cs:line 132
2025-07-11 14:47:44.444 +03:00 [WRN] Failed to send payment confirmation email for payment: REF0299 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentMessageConsumer","MachineName":"DESKTOP-F3AMJ10","ThreadId":25,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.340 +03:00 [INF] V3 CreatePayment endpoint called with reference: REF0399 {"SourceContext":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController","ActionId":"3f4b87b8-4e5f-4126-9b23-cf4172c1c625","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KM:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KM","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.351 +03:00 [INF] Processing payment: REF0399 for student: S660099 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"3f4b87b8-4e5f-4126-9b23-cf4172c1c625","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KM:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KM","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.476 +03:00 [INF] Payment processed successfully: REF0399 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"3f4b87b8-4e5f-4126-9b23-cf4172c1c625","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KM:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KM","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.483 +03:00 [INF] Publishing payment processed message: REF0399 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.RabbitMQMessagePublisher","ActionId":"3f4b87b8-4e5f-4126-9b23-cf4172c1c625","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KM:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KM","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.508 +03:00 [INF] Successfully published payment processed message: REF0399 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.RabbitMQMessagePublisher","ActionId":"3f4b87b8-4e5f-4126-9b23-cf4172c1c625","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KM:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KM","MachineName":"DESKTOP-F3AMJ10","ThreadId":3,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.513 +03:00 [INF] Processing payment message: REF0399 for student: S660099 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentMessageConsumer","MachineName":"DESKTOP-F3AMJ10","ThreadId":27,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.522 +03:00 [INF] Sending payment receipt email to awkiiru@usiu.ac.ke for payment REF0399 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.EmailService","MachineName":"DESKTOP-F3AMJ10","ThreadId":19,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.526 +03:00 [INF] V3 GetAllPayments endpoint called with page 1 {"SourceContext":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":3,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.528 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"} {"SourceContext":"xyz_university_payment_api.Core.Application.Services.StudentService","ActionId":"dc159eba-f102-49bd-801d-680abf7b9643","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.StudentControllerV3.GetStudents (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KM:00000004","RequestPath":"/api/v3/StudentControllerV","ConnectionId":"0HNE0E1SUQ5KM","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.539 +03:00 [INF] Retrieving all payments with student information {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":3,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.544 +03:00 [INF] Current user role: Admin, User ID: 1 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.StudentService","ActionId":"dc159eba-f102-49bd-801d-680abf7b9643","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.StudentControllerV3.GetStudents (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KM:00000004","RequestPath":"/api/v3/StudentControllerV","ConnectionId":"0HNE0E1SUQ5KM","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.551 +03:00 [INF] Current user role: Admin, User ID: 1 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":3,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.559 +03:00 [INF] Retrieved 10 payments for Admin {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.567 +03:00 [INF] Retrieved 9 students for lookup {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.571 +03:00 [INF] Payment 1 for student S12345, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.576 +03:00 [INF] Payment 2 for student S67890, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.582 +03:00 [INF] Payment 3 for student S66004, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.586 +03:00 [INF] Payment 4 for student S66001, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.591 +03:00 [INF] Payment 5 for student S660066, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.597 +03:00 [INF] Payment 6 for student S660088, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.601 +03:00 [INF] Payment 7 for student S660099, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.605 +03:00 [INF] Payment 8 for student S660099, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.611 +03:00 [INF] Payment 9 for student S660099, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.616 +03:00 [INF] Payment 10 for student S660099, found student: Yes {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:11.620 +03:00 [INF] Returning 10 payment DTOs {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentService","ActionId":"91e03523-91e9-45a9-b728-efbdc357e370","ActionName":"xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.GetAllPayments (xyz-university-payment-api)","RequestId":"0HNE0E1SUQ5KN:00000002","RequestPath":"/api/v3/Payment","ConnectionId":"0HNE0E1SUQ5KN","MachineName":"DESKTOP-F3AMJ10","ThreadId":18,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:12.562 +03:00 [ERR] Failed to send email to awkiiru@usiu.ac.ke. Status: "Unauthorized" {"SourceContext":"xyz_university_payment_api.Core.Application.Services.EmailService","MachineName":"DESKTOP-F3AMJ10","ThreadId":17,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:12.567 +03:00 [WRN] Failed to send payment receipt email for payment: REF0399 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentMessageConsumer","MachineName":"DESKTOP-F3AMJ10","ThreadId":17,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:12.570 +03:00 [INF] Sending payment confirmation email to awkiiru@usiu.ac.ke for payment REF0399 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.EmailService","MachineName":"DESKTOP-F3AMJ10","ThreadId":17,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:12.873 +03:00 [ERR] Failed to send email to awkiiru@usiu.ac.ke. Status: "Unauthorized" {"SourceContext":"xyz_university_payment_api.Core.Application.Services.EmailService","MachineName":"DESKTOP-F3AMJ10","ThreadId":17,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:26:12.880 +03:00 [WRN] Failed to send payment confirmation email for payment: REF0399 {"SourceContext":"xyz_university_payment_api.Core.Application.Services.PaymentMessageConsumer","MachineName":"DESKTOP-F3AMJ10","ThreadId":17,"ProcessId":10468,"Application":"XYZ University Payment API"}
2025-07-11 15:31:56.821 +03:00 [INF] Bus stopped: "rabbitmq://localhost/" {"SourceContext":"MassTransit","MachineName":"DESKTOP-F3AMJ10","ThreadId":31,"ProcessId":10468,"Application":"XYZ University Payment API"}
