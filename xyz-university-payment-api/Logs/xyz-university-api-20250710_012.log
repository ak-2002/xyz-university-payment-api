2025-07-10 11:15:42.457 +03:00 [INF] Ensuring database is created
2025-07-10 11:15:42.956 +03:00 [INF] Database created successfully
2025-07-10 11:15:42.959 +03:00 [INF] Seeding default roles and permissions
2025-07-10 11:15:43.209 +03:00 [INF] Valid data already seeded, skipping seeding process
2025-07-10 11:15:43.216 +03:00 [INF] Default roles and permissions seeded successfully
2025-07-10 11:15:43.354 +03:00 [INF] XYZ University Payment API started successfully
2025-07-10 11:15:43.473 +03:00 [INF] Configured endpoint PaymentProcessedMessage, Consumer: xyz_university_payment_api.Core.Application.Services.PaymentProcessedMessageConsumer
2025-07-10 11:15:43.480 +03:00 [INF] Configured endpoint PaymentFailedMessage, Consumer: xyz_university_payment_api.Core.Application.Services.PaymentFailedMessageConsumer
2025-07-10 11:15:43.486 +03:00 [INF] Configured endpoint PaymentValidationMessage, Consumer: xyz_university_payment_api.Core.Application.Services.PaymentValidationMessageConsumer
2025-07-10 11:15:43.708 +03:00 [INF] Bus started: "rabbitmq://localhost/"
2025-07-10 11:16:12.055 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-10 11:16:12.099 +03:00 [INF] Generated access token for user admin with 1 roles and 16 permissions
2025-07-10 11:16:12.357 +03:00 [INF] V3 GetAdminStats endpoint called
2025-07-10 11:16:12.365 +03:00 [INF] Retrieving all students
2025-07-10 11:16:12.436 +03:00 [INF] Retrieving all payments
2025-07-10 11:16:12.496 +03:00 [INF] V3 GetAdminStats endpoint called
2025-07-10 11:16:12.506 +03:00 [INF] Retrieving all students
2025-07-10 11:16:12.514 +03:00 [INF] Retrieving all payments
2025-07-10 11:16:33.520 +03:00 [INF] V3 GetAllPayments endpoint called with page 1
2025-07-10 11:16:33.533 +03:00 [INF] Retrieving all payments with student information
2025-07-10 11:16:33.541 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-10 11:16:33.553 +03:00 [INF] Retrieved 5 payments for Admin
2025-07-10 11:16:33.562 +03:00 [INF] Retrieved 8 students for lookup
2025-07-10 11:16:33.566 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-10 11:16:33.567 +03:00 [INF] Payment 1 for student S12345, found student: Yes
2025-07-10 11:16:33.584 +03:00 [INF] Payment 2 for student S67890, found student: Yes
2025-07-10 11:16:33.584 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-10 11:16:33.592 +03:00 [INF] Payment 3 for student S66004, found student: Yes
2025-07-10 11:16:33.598 +03:00 [INF] Payment 4 for student S66001, found student: Yes
2025-07-10 11:16:33.603 +03:00 [INF] Payment 5 for student S660066, found student: Yes
2025-07-10 11:16:33.608 +03:00 [INF] Returning 5 payment DTOs
2025-07-10 11:16:33.628 +03:00 [INF] V3 GetAllPayments endpoint called with page 1
2025-07-10 11:16:33.634 +03:00 [INF] Retrieving all payments with student information
2025-07-10 11:16:33.640 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-10 11:16:33.640 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-10 11:16:33.689 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-10 11:16:33.691 +03:00 [INF] Retrieved 5 payments for Admin
2025-07-10 11:16:33.709 +03:00 [INF] Retrieved 8 students for lookup
2025-07-10 11:16:33.714 +03:00 [INF] Payment 1 for student S12345, found student: Yes
2025-07-10 11:16:33.719 +03:00 [INF] Payment 2 for student S67890, found student: Yes
2025-07-10 11:16:33.724 +03:00 [INF] Payment 3 for student S66004, found student: Yes
2025-07-10 11:16:33.729 +03:00 [INF] Payment 4 for student S66001, found student: Yes
2025-07-10 11:16:33.733 +03:00 [INF] Payment 5 for student S660066, found student: Yes
2025-07-10 11:16:33.738 +03:00 [INF] Returning 5 payment DTOs
2025-07-10 11:16:37.719 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-10 11:16:37.739 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-10 11:16:37.783 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-10 11:16:37.804 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-10 11:21:05.444 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - xyz_university_payment_api.Presentation.Controllers.V3.UserControllerV3.GetUsers (xyz-university-payment-api). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate schema for type - System.Collections.Generic.IEnumerable`1[xyz_university_payment_api.Presentation.Controllers.V3.UserDto]. See inner exception
 ---> System.InvalidOperationException: Can't use schemaId "$UserDto" for type "$xyz_university_payment_api.Presentation.Controllers.V3.UserDto". The same schemaId is already used for type "$xyz_university_payment_api.Core.Application.DTOs.UserDto"
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaRepository.RegisterType(Type type, String schemaId)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateReferencedSchema(DataContract dataContract, SchemaRepository schemaRepository, Func`1 definitionFactory)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.CreateArraySchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.<>c__DisplayClass13_0.<GenerateConcreteSchema>b__1()
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateConcreteSchema(DataContract dataContract, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchemaForType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SchemaGenerator.GenerateSchema(Type modelType, SchemaRepository schemaRepository, MemberInfo memberInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateSchema(Type type, SchemaRepository schemaRepository, PropertyInfo propertyInfo, ParameterInfo parameterInfo, ApiParameterRouteInfo routeInfo)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.CreateResponseMediaType(Type modelType, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.<>c__DisplayClass42_0.<GenerateResponse>b__2(String contentType)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateResponse(ApiDescription apiDescription, SchemaRepository schemaRepository, String statusCode, ApiResponseType apiResponseType)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateResponses(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository, Func`3 parametersGenerator, Func`3 bodyGenerator, Func`3 applyFilters)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationAsync(OpenApiDocument document, ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperationsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository, Func`4 operationsGenerator)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePathsAsync(OpenApiDocument document, IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-10 11:24:46.713 +03:00 [INF] Bus stopped: "rabbitmq://localhost/"
2025-07-10 11:25:03.947 +03:00 [INF] Starting XYZ University Payment API {"MachineName":"DESKTOP-F3AMJ10","ThreadId":1,"ProcessId":4204,"Application":"XYZ University Payment API"}
