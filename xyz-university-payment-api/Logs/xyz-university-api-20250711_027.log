2025-07-11 15:44:20.017 +03:00 [INF] Ensuring database is created
2025-07-11 15:44:21.086 +03:00 [INF] Database created successfully
2025-07-11 15:44:21.092 +03:00 [INF] Seeding default roles and permissions
2025-07-11 15:44:21.722 +03:00 [INF] Valid data already seeded, skipping seeding process
2025-07-11 15:44:21.734 +03:00 [INF] Default roles and permissions seeded successfully
2025-07-11 15:44:22.147 +03:00 [INF] XYZ University Payment API started successfully
2025-07-11 15:44:22.403 +03:00 [INF] Configured endpoint PaymentMessage, Consumer: xyz_university_payment_api.Core.Application.Services.PaymentMessageConsumer
2025-07-11 15:44:22.424 +03:00 [INF] Configured endpoint PaymentFailedMessage, Consumer: xyz_university_payment_api.Core.Application.Services.PaymentFailedMessageConsumer
2025-07-11 15:44:23.007 +03:00 [INF] Bus started: "rabbitmq://localhost/"
2025-07-11 15:44:50.794 +03:00 [INF] V3 GetAllPayments endpoint called with page 1
2025-07-11 15:44:50.806 +03:00 [INF] Retrieving all payments with student information
2025-07-11 15:44:50.814 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:44:50.838 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-11 15:44:50.872 +03:00 [INF] Retrieved 11 payments for Admin
2025-07-11 15:44:50.914 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:44:50.917 +03:00 [INF] Retrieved 9 students for lookup
2025-07-11 15:44:50.931 +03:00 [INF] Payment 1 for student S12345, found student: Yes
2025-07-11 15:44:50.938 +03:00 [INF] Payment 2 for student S67890, found student: Yes
2025-07-11 15:44:50.949 +03:00 [INF] Payment 3 for student S66004, found student: Yes
2025-07-11 15:44:50.954 +03:00 [INF] Payment 4 for student S66001, found student: Yes
2025-07-11 15:44:50.963 +03:00 [INF] Payment 5 for student S660066, found student: Yes
2025-07-11 15:44:50.968 +03:00 [INF] Payment 6 for student S660088, found student: Yes
2025-07-11 15:44:50.974 +03:00 [INF] Payment 7 for student S660099, found student: Yes
2025-07-11 15:44:50.982 +03:00 [INF] Payment 8 for student S660099, found student: Yes
2025-07-11 15:44:50.987 +03:00 [INF] Payment 9 for student S660099, found student: Yes
2025-07-11 15:44:50.996 +03:00 [INF] Payment 10 for student S660099, found student: Yes
2025-07-11 15:44:51.001 +03:00 [INF] Payment 11 for student S660099, found student: Yes
2025-07-11 15:44:51.007 +03:00 [INF] Returning 11 payment DTOs
2025-07-11 15:44:51.055 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-11 15:44:51.056 +03:00 [INF] V3 GetAllPayments endpoint called with page 1
2025-07-11 15:44:51.078 +03:00 [INF] Retrieving all payments with student information
2025-07-11 15:44:51.079 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:44:51.090 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:44:51.119 +03:00 [INF] Retrieved 11 payments for Admin
2025-07-11 15:44:51.136 +03:00 [INF] Retrieved 9 students for lookup
2025-07-11 15:44:51.147 +03:00 [INF] Payment 1 for student S12345, found student: Yes
2025-07-11 15:44:51.154 +03:00 [INF] Payment 2 for student S67890, found student: Yes
2025-07-11 15:44:51.165 +03:00 [INF] Payment 3 for student S66004, found student: Yes
2025-07-11 15:44:51.172 +03:00 [INF] Payment 4 for student S66001, found student: Yes
2025-07-11 15:44:51.183 +03:00 [INF] Payment 5 for student S660066, found student: Yes
2025-07-11 15:44:51.192 +03:00 [INF] Payment 6 for student S660088, found student: Yes
2025-07-11 15:44:51.202 +03:00 [INF] Payment 7 for student S660099, found student: Yes
2025-07-11 15:44:51.213 +03:00 [INF] Payment 8 for student S660099, found student: Yes
2025-07-11 15:44:51.221 +03:00 [INF] Payment 9 for student S660099, found student: Yes
2025-07-11 15:44:51.232 +03:00 [INF] Payment 10 for student S660099, found student: Yes
2025-07-11 15:44:51.240 +03:00 [INF] Payment 11 for student S660099, found student: Yes
2025-07-11 15:44:51.250 +03:00 [INF] Returning 11 payment DTOs
2025-07-11 15:45:31.036 +03:00 [INF] V3 CreatePayment endpoint called with reference: REF0499
2025-07-11 15:45:31.050 +03:00 [INF] Processing payment: REF0499 for student: S660099
2025-07-11 15:45:31.076 +03:00 [WRN] Duplicate payment reference: REF0499
2025-07-11 15:45:31.083 +03:00 [WRN] Publishing payment failed message: REF0499, Reason: Duplicate payment reference
2025-07-11 15:45:31.212 +03:00 [INF] Successfully published payment failed message: REF0499
2025-07-11 15:45:31.224 +03:00 [WRN] Request 0HNE0F2SVMDI4:00000002 failed: {"RequestId":"0HNE0F2SVMDI4:00000002","Path":{"Value":"/api/v3/Payment","HasValue":true},"Method":"POST","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36","ExceptionType":"DuplicatePaymentException","ExceptionMessage":"Payment with reference REF0499 already exists.","StatusCode":409}
xyz_university_payment_api.Core.Domain.Exceptions.DuplicatePaymentException: Payment with reference REF0499 already exists.
   at xyz_university_payment_api.Core.Application.Services.PaymentService.ProcessPaymentAsync(PaymentNotification payment) in C:\Users\wanja\Desktop\jj\xyz-university-payment-api\xyz-university-payment-api\Core\Application\Services\PaymentService.cs:line 81
   at xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment(CreatePaymentDto createPaymentDto) in C:\Users\wanja\Desktop\jj\xyz-university-payment-api\xyz-university-payment-api\Presentation\Controllers\V3\PaymentControllerV3.cs:line 45
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-07-11 15:45:31.239 +03:00 [INF] Processing payment failure message: REF0499 for student: S660099
2025-07-11 15:45:31.262 +03:00 [INF] Sending payment failure notification to awkiiru@usiu.ac.ke
2025-07-11 15:45:32.569 +03:00 [ERR] Failed to send email to awkiiru@usiu.ac.ke. Status: "Forbidden"
2025-07-11 15:45:32.583 +03:00 [WRN] Failed to send payment failure notification for payment: REF0499
2025-07-11 15:46:57.643 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-11 15:46:57.685 +03:00 [INF] Generated access token for user admin with 1 roles and 16 permissions
2025-07-11 15:46:57.788 +03:00 [INF] V3 GetAdminStats endpoint called
2025-07-11 15:46:57.797 +03:00 [INF] Retrieving all students
2025-07-11 15:46:57.814 +03:00 [INF] Retrieving all payments
2025-07-11 15:46:57.837 +03:00 [INF] V3 GetAdminStats endpoint called
2025-07-11 15:46:57.846 +03:00 [INF] Retrieving all students
2025-07-11 15:46:57.855 +03:00 [INF] Retrieving all payments
2025-07-11 15:47:01.807 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-11 15:47:01.832 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:47:01.860 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-11 15:47:01.877 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:47:03.773 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-11 15:47:03.775 +03:00 [INF] V3 GetAllPayments endpoint called with page 1
2025-07-11 15:47:03.799 +03:00 [INF] Retrieving all payments with student information
2025-07-11 15:47:03.800 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:47:03.815 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:47:03.827 +03:00 [INF] Retrieved 11 payments for Admin
2025-07-11 15:47:03.828 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-11 15:47:03.845 +03:00 [INF] Retrieved 9 students for lookup
2025-07-11 15:47:03.847 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:47:03.856 +03:00 [INF] Payment 1 for student S12345, found student: Yes
2025-07-11 15:47:03.861 +03:00 [INF] Payment 2 for student S67890, found student: Yes
2025-07-11 15:47:03.867 +03:00 [INF] Payment 3 for student S66004, found student: Yes
2025-07-11 15:47:03.874 +03:00 [INF] Payment 4 for student S66001, found student: Yes
2025-07-11 15:47:03.879 +03:00 [INF] Payment 5 for student S660066, found student: Yes
2025-07-11 15:47:03.885 +03:00 [INF] Payment 6 for student S660088, found student: Yes
2025-07-11 15:47:03.891 +03:00 [INF] Payment 7 for student S660099, found student: Yes
2025-07-11 15:47:03.895 +03:00 [INF] Payment 8 for student S660099, found student: Yes
2025-07-11 15:47:03.902 +03:00 [INF] Payment 9 for student S660099, found student: Yes
2025-07-11 15:47:03.908 +03:00 [INF] Payment 10 for student S660099, found student: Yes
2025-07-11 15:47:03.914 +03:00 [INF] Payment 11 for student S660099, found student: Yes
2025-07-11 15:47:03.922 +03:00 [INF] Returning 11 payment DTOs
2025-07-11 15:47:03.930 +03:00 [INF] V3 GetAllPayments endpoint called with page 1
2025-07-11 15:47:03.938 +03:00 [INF] Retrieving all payments with student information
2025-07-11 15:47:03.944 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:47:03.956 +03:00 [INF] Retrieved 11 payments for Admin
2025-07-11 15:47:03.963 +03:00 [INF] Retrieved 9 students for lookup
2025-07-11 15:47:03.970 +03:00 [INF] Payment 1 for student S12345, found student: Yes
2025-07-11 15:47:03.977 +03:00 [INF] Payment 2 for student S67890, found student: Yes
2025-07-11 15:47:03.982 +03:00 [INF] Payment 3 for student S66004, found student: Yes
2025-07-11 15:47:03.991 +03:00 [INF] Payment 4 for student S66001, found student: Yes
2025-07-11 15:47:03.996 +03:00 [INF] Payment 5 for student S660066, found student: Yes
2025-07-11 15:47:04.002 +03:00 [INF] Payment 6 for student S660088, found student: Yes
2025-07-11 15:47:04.007 +03:00 [INF] Payment 7 for student S660099, found student: Yes
2025-07-11 15:47:04.012 +03:00 [INF] Payment 8 for student S660099, found student: Yes
2025-07-11 15:47:04.018 +03:00 [INF] Payment 9 for student S660099, found student: Yes
2025-07-11 15:47:04.024 +03:00 [INF] Payment 10 for student S660099, found student: Yes
2025-07-11 15:47:04.029 +03:00 [INF] Payment 11 for student S660099, found student: Yes
2025-07-11 15:47:04.036 +03:00 [INF] Returning 11 payment DTOs
2025-07-11 15:47:07.358 +03:00 [INF] V3 GetAdminStats endpoint called
2025-07-11 15:47:07.366 +03:00 [INF] Retrieving all students
2025-07-11 15:47:07.378 +03:00 [INF] Retrieving all payments
2025-07-11 15:47:07.399 +03:00 [INF] V3 GetAdminStats endpoint called
2025-07-11 15:47:07.410 +03:00 [INF] Retrieving all students
2025-07-11 15:47:07.427 +03:00 [INF] Retrieving all payments
2025-07-11 15:47:10.274 +03:00 [INF] V3 GetAllPayments endpoint called with page 1
2025-07-11 15:47:10.274 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-11 15:47:10.292 +03:00 [INF] Retrieving all payments with student information
2025-07-11 15:47:10.297 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:47:10.305 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:47:10.314 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-11 15:47:10.314 +03:00 [INF] Retrieved 11 payments for Admin
2025-07-11 15:47:10.334 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:47:10.337 +03:00 [INF] Retrieved 9 students for lookup
2025-07-11 15:47:10.344 +03:00 [INF] Payment 1 for student S12345, found student: Yes
2025-07-11 15:47:10.351 +03:00 [INF] Payment 2 for student S67890, found student: Yes
2025-07-11 15:47:10.357 +03:00 [INF] Payment 3 for student S66004, found student: Yes
2025-07-11 15:47:10.361 +03:00 [INF] Payment 4 for student S66001, found student: Yes
2025-07-11 15:47:10.367 +03:00 [INF] Payment 5 for student S660066, found student: Yes
2025-07-11 15:47:10.373 +03:00 [INF] Payment 6 for student S660088, found student: Yes
2025-07-11 15:47:10.378 +03:00 [INF] Payment 7 for student S660099, found student: Yes
2025-07-11 15:47:10.383 +03:00 [INF] Payment 8 for student S660099, found student: Yes
2025-07-11 15:47:10.389 +03:00 [INF] Payment 9 for student S660099, found student: Yes
2025-07-11 15:47:10.394 +03:00 [INF] Payment 10 for student S660099, found student: Yes
2025-07-11 15:47:10.399 +03:00 [INF] Payment 11 for student S660099, found student: Yes
2025-07-11 15:47:10.406 +03:00 [INF] Returning 11 payment DTOs
2025-07-11 15:47:10.412 +03:00 [INF] V3 GetAllPayments endpoint called with page 1
2025-07-11 15:47:10.417 +03:00 [INF] Retrieving all payments with student information
2025-07-11 15:47:10.422 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:47:10.435 +03:00 [INF] Retrieved 11 payments for Admin
2025-07-11 15:47:10.443 +03:00 [INF] Retrieved 9 students for lookup
2025-07-11 15:47:10.451 +03:00 [INF] Payment 1 for student S12345, found student: Yes
2025-07-11 15:47:10.457 +03:00 [INF] Payment 2 for student S67890, found student: Yes
2025-07-11 15:47:10.462 +03:00 [INF] Payment 3 for student S66004, found student: Yes
2025-07-11 15:47:10.468 +03:00 [INF] Payment 4 for student S66001, found student: Yes
2025-07-11 15:47:10.473 +03:00 [INF] Payment 5 for student S660066, found student: Yes
2025-07-11 15:47:10.478 +03:00 [INF] Payment 6 for student S660088, found student: Yes
2025-07-11 15:47:10.483 +03:00 [INF] Payment 7 for student S660099, found student: Yes
2025-07-11 15:47:10.490 +03:00 [INF] Payment 8 for student S660099, found student: Yes
2025-07-11 15:47:10.495 +03:00 [INF] Payment 9 for student S660099, found student: Yes
2025-07-11 15:47:10.501 +03:00 [INF] Payment 10 for student S660099, found student: Yes
2025-07-11 15:47:10.506 +03:00 [INF] Payment 11 for student S660099, found student: Yes
2025-07-11 15:47:10.510 +03:00 [INF] Returning 11 payment DTOs
2025-07-11 15:47:55.343 +03:00 [INF] V3 CreatePayment endpoint called with reference: REF0499
2025-07-11 15:47:55.350 +03:00 [INF] Processing payment: REF0499 for student: S660099
2025-07-11 15:47:55.359 +03:00 [WRN] Duplicate payment reference: REF0499
2025-07-11 15:47:55.364 +03:00 [WRN] Publishing payment failed message: REF0499, Reason: Duplicate payment reference
2025-07-11 15:47:55.373 +03:00 [INF] Successfully published payment failed message: REF0499
2025-07-11 15:47:55.374 +03:00 [INF] Processing payment failure message: REF0499 for student: S660099
2025-07-11 15:47:55.380 +03:00 [WRN] Request 0HNE0F2SVMDI9:00000002 failed: {"RequestId":"0HNE0F2SVMDI9:00000002","Path":{"Value":"/api/v3/Payment","HasValue":true},"Method":"POST","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36","ExceptionType":"DuplicatePaymentException","ExceptionMessage":"Payment with reference REF0499 already exists.","StatusCode":409}
xyz_university_payment_api.Core.Domain.Exceptions.DuplicatePaymentException: Payment with reference REF0499 already exists.
   at xyz_university_payment_api.Core.Application.Services.PaymentService.ProcessPaymentAsync(PaymentNotification payment) in C:\Users\wanja\Desktop\jj\xyz-university-payment-api\xyz-university-payment-api\Core\Application\Services\PaymentService.cs:line 81
   at xyz_university_payment_api.Presentation.Controllers.V3.PaymentController.CreatePayment(CreatePaymentDto createPaymentDto) in C:\Users\wanja\Desktop\jj\xyz-university-payment-api\xyz-university-payment-api\Presentation\Controllers\V3\PaymentControllerV3.cs:line 45
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-07-11 15:47:55.387 +03:00 [INF] Sending payment failure notification to awkiiru@usiu.ac.ke
2025-07-11 15:47:56.545 +03:00 [ERR] Failed to send email to awkiiru@usiu.ac.ke. Status: "Forbidden"
2025-07-11 15:47:56.550 +03:00 [WRN] Failed to send payment failure notification for payment: REF0499
2025-07-11 15:48:57.803 +03:00 [INF] V3 CreatePayment endpoint called with reference: REF0599
2025-07-11 15:48:57.808 +03:00 [INF] Processing payment: REF0599 for student: S660099
2025-07-11 15:48:57.905 +03:00 [INF] Payment processed successfully: REF0599
2025-07-11 15:48:57.918 +03:00 [INF] Publishing payment processed message: REF0599
2025-07-11 15:48:57.951 +03:00 [INF] Successfully published payment processed message: REF0599
2025-07-11 15:48:57.955 +03:00 [INF] Processing payment message: REF0599 for student: S660099
2025-07-11 15:48:57.966 +03:00 [INF] Sending payment receipt email to awkiiru@usiu.ac.ke for payment REF0599
2025-07-11 15:48:57.983 +03:00 [INF] V3 GetAllPayments endpoint called with page 1
2025-07-11 15:48:57.986 +03:00 [INF] Retrieving students V3 with filter: {"StudentNumber":null,"FullName":null,"Program":null,"IsActive":null,"CreatedFrom":null,"CreatedTo":null,"Tags":null,"MinTotalPayments":null,"MaxTotalPayments":null,"SearchTerm":null,"Metadata":null,"$type":"StudentFilterDtoV3"}
2025-07-11 15:48:58.004 +03:00 [INF] Retrieving all payments with student information
2025-07-11 15:48:58.011 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:48:58.023 +03:00 [INF] Current user role: Admin, User ID: 1
2025-07-11 15:48:58.035 +03:00 [INF] Retrieved 12 payments for Admin
2025-07-11 15:48:58.049 +03:00 [INF] Retrieved 9 students for lookup
2025-07-11 15:48:58.055 +03:00 [INF] Payment 1 for student S12345, found student: Yes
2025-07-11 15:48:58.064 +03:00 [INF] Payment 2 for student S67890, found student: Yes
2025-07-11 15:48:58.072 +03:00 [INF] Payment 3 for student S66004, found student: Yes
2025-07-11 15:48:58.081 +03:00 [INF] Payment 4 for student S66001, found student: Yes
2025-07-11 15:48:58.089 +03:00 [INF] Payment 5 for student S660066, found student: Yes
2025-07-11 15:48:58.098 +03:00 [INF] Payment 6 for student S660088, found student: Yes
2025-07-11 15:48:58.106 +03:00 [INF] Payment 7 for student S660099, found student: Yes
2025-07-11 15:48:58.115 +03:00 [INF] Payment 8 for student S660099, found student: Yes
2025-07-11 15:48:58.123 +03:00 [INF] Payment 9 for student S660099, found student: Yes
2025-07-11 15:48:58.132 +03:00 [INF] Payment 10 for student S660099, found student: Yes
2025-07-11 15:48:58.138 +03:00 [INF] Payment 11 for student S660099, found student: Yes
2025-07-11 15:48:58.148 +03:00 [INF] Payment 12 for student S660099, found student: Yes
2025-07-11 15:48:58.155 +03:00 [INF] Returning 12 payment DTOs
2025-07-11 15:48:58.724 +03:00 [ERR] Failed to send email to awkiiru@usiu.ac.ke. Status: "Forbidden"
2025-07-11 15:48:58.731 +03:00 [WRN] Failed to send payment receipt email for payment: REF0599
2025-07-11 15:48:58.738 +03:00 [INF] Sending payment confirmation email to awkiiru@usiu.ac.ke for payment REF0599
2025-07-11 15:48:59.012 +03:00 [ERR] Failed to send email to awkiiru@usiu.ac.ke. Status: "Forbidden"
2025-07-11 15:48:59.019 +03:00 [WRN] Failed to send payment confirmation email for payment: REF0599
2025-07-11 15:57:18.761 +03:00 [INF] Bus stopped: "rabbitmq://localhost/"
2025-07-11 15:57:22.894 +03:00 [INF] Starting XYZ University Payment API {"MachineName":"DESKTOP-F3AMJ10","ThreadId":1,"ProcessId":14852,"Application":"XYZ University Payment API"}
