2025-06-23 12:36:01.379 +03:00 [INF] Ensuring database is created
2025-06-23 12:36:01.402 +03:00 [INF] Database created successfully
2025-06-23 12:36:02.062 +03:00 [INF] XYZ University Payment API started successfully
2025-06-23 12:36:02.148 +03:00 [INF] Configured endpoint PaymentProcessedMessage, Consumer: xyz_university_payment_api.Services.PaymentProcessedMessageConsumer
2025-06-23 12:36:02.156 +03:00 [INF] Configured endpoint PaymentFailedMessage, Consumer: xyz_university_payment_api.Services.PaymentFailedMessageConsumer
2025-06-23 12:36:02.161 +03:00 [INF] Configured endpoint PaymentValidationMessage, Consumer: xyz_university_payment_api.Services.PaymentValidationMessageConsumer
2025-06-23 12:36:02.384 +03:00 [INF] Bus started: "rabbitmq://localhost/"
2025-06-23 12:37:30.207 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-23 12:42:35.565 +03:00 [INF] TestMessaging endpoint called
2025-06-23 12:42:35.574 +03:00 [INF] Publishing payment processed message: TEST-REF-001
2025-06-23 12:42:35.728 +03:00 [INF] Successfully published payment processed message: TEST-REF-001
2025-06-23 12:42:35.739 +03:00 [WRN] Publishing payment failed message: TEST-REF-002, Reason: Test error reason
2025-06-23 12:42:35.744 +03:00 [INF] Received payment processed message: TEST-REF-001 for student S12345
2025-06-23 12:42:35.750 +03:00 [INF] Payment processed successfully: Amount 5000, Student Active: true
2025-06-23 12:42:35.771 +03:00 [INF] Successfully published payment failed message: TEST-REF-002
2025-06-23 12:42:35.773 +03:00 [WRN] Received payment failed message: TEST-REF-002 for student S67890, Reason: Test error reason
2025-06-23 12:42:35.779 +03:00 [INF] Publishing payment validation message: TEST-REF-003
2025-06-23 12:42:35.779 +03:00 [WRN] Payment failed: Amount 3000, Error: Test error reason
2025-06-23 12:42:35.821 +03:00 [INF] Successfully published payment validation message: TEST-REF-003
2025-06-23 12:42:35.822 +03:00 [INF] Received payment validation message: TEST-REF-003 for student S66001
2025-06-23 12:42:35.830 +03:00 [WRN] Payment validation failed with 2 errors: Test validation error 1, Test validation error 2
2025-06-23 13:07:56.231 +03:00 [WRN] Connection Failed: "rabbitmq://localhost/"
RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> System.AggregateException: One or more errors occurred. (Connection failed)
 ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Threading.Tasks.ValueTask.ValueTaskSourceAsTask.<>c.<.cctor>b__4_0(Object state)
--- End of stack trace from previous location ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingAddressFamily(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout, AddressFamily family)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingIPv4(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler..ctor(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.Framing.Impl.IProtocolExtensions.CreateFrameHandler(IProtocol protocol, AmqpTcpEndpoint endpoint, ArrayPool`1 pool, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandler(AmqpTcpEndpoint endpoint)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IList`1 hostnames, String clientProvidedName)
   at MassTransit.RabbitMqTransport.ConnectionContextFactory.CreateConnection(ISupervisor supervisor) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/ConnectionContextFactory.cs:line 86
2025-06-23 14:30:17.337 +03:00 [INF] TestMessaging endpoint called
2025-06-23 14:30:17.348 +03:00 [INF] Publishing payment processed message: TEST-REF-001
2025-06-23 14:30:17.377 +03:00 [INF] Successfully published payment processed message: TEST-REF-001
2025-06-23 14:30:17.379 +03:00 [INF] Received payment processed message: TEST-REF-001 for student S12345
2025-06-23 14:30:17.385 +03:00 [WRN] Publishing payment failed message: TEST-REF-002, Reason: Test error reason
2025-06-23 14:30:17.385 +03:00 [INF] Payment processed successfully: Amount 5000, Student Active: true
2025-06-23 14:30:17.412 +03:00 [INF] Successfully published payment failed message: TEST-REF-002
2025-06-23 14:30:17.412 +03:00 [WRN] Received payment failed message: TEST-REF-002 for student S67890, Reason: Test error reason
2025-06-23 14:30:17.417 +03:00 [INF] Publishing payment validation message: TEST-REF-003
2025-06-23 14:30:17.424 +03:00 [WRN] Payment failed: Amount 3000, Error: Test error reason
2025-06-23 14:30:17.446 +03:00 [INF] Successfully published payment validation message: TEST-REF-003
2025-06-23 14:30:17.446 +03:00 [INF] Received payment validation message: TEST-REF-003 for student S66001
2025-06-23 14:30:17.453 +03:00 [WRN] Payment validation failed with 2 errors: Test validation error 1, Test validation error 2
2025-06-23 15:43:38.899 +03:00 [INF] TestMessaging endpoint called
2025-06-23 15:43:38.907 +03:00 [INF] Publishing payment processed message: TEST-REF-001
2025-06-23 15:43:38.976 +03:00 [INF] Successfully published payment processed message: TEST-REF-001
2025-06-23 15:43:38.980 +03:00 [INF] Received payment processed message: TEST-REF-001 for student S12345
2025-06-23 15:43:38.985 +03:00 [WRN] Publishing payment failed message: TEST-REF-002, Reason: Test error reason
2025-06-23 15:43:38.986 +03:00 [INF] Payment processed successfully: Amount 5000, Student Active: true
2025-06-23 15:43:39.000 +03:00 [INF] Successfully published payment failed message: TEST-REF-002
2025-06-23 15:43:39.000 +03:00 [WRN] Received payment failed message: TEST-REF-002 for student S67890, Reason: Test error reason
2025-06-23 15:43:39.006 +03:00 [INF] Publishing payment validation message: TEST-REF-003
2025-06-23 15:43:39.007 +03:00 [WRN] Payment failed: Amount 3000, Error: Test error reason
2025-06-23 15:43:39.038 +03:00 [INF] Successfully published payment validation message: TEST-REF-003
2025-06-23 15:43:39.038 +03:00 [INF] Received payment validation message: TEST-REF-003 for student S66001
2025-06-23 15:43:39.045 +03:00 [WRN] Payment validation failed with 2 errors: Test validation error 1, Test validation error 2
2025-06-23 15:58:33.228 +03:00 [INF] GetAllPayments endpoint called
2025-06-23 15:58:33.238 +03:00 [INF] Retrieving all payments
2025-06-23 16:00:43.390 +03:00 [INF] NotifyPayment endpoint called with reference: REF56789
2025-06-23 16:00:43.397 +03:00 [INF] Processing payment: REF56789 for student: S66003
2025-06-23 16:00:43.659 +03:00 [INF] Payment processed successfully: REF56789
2025-06-23 16:00:43.665 +03:00 [INF] Publishing payment processed message: REF56789
2025-06-23 16:00:43.677 +03:00 [INF] Received payment processed message: REF56789 for student S66003
2025-06-23 16:00:43.677 +03:00 [INF] Successfully published payment processed message: REF56789
2025-06-23 16:00:43.684 +03:00 [INF] Payment processed successfully: Amount 15000, Student Active: true
2025-06-23 16:00:43.684 +03:00 [INF] Payment processed successfully: REF56789
2025-06-23 16:30:25.541 +03:00 [INF] ProcessBatchPayments endpoint called with 1 payments
2025-06-23 16:30:25.551 +03:00 [INF] Processing batch of 1 payments
2025-06-23 16:30:25.555 +03:00 [INF] Processing payment: string for student: string
2025-06-23 16:30:25.559 +03:00 [WRN] Payment validation failed: Payment reference must start with 'REF' and be at least 6 characters long, Payment amount must be greater than zero
2025-06-23 16:30:25.564 +03:00 [INF] Publishing payment validation message: string
2025-06-23 16:30:25.577 +03:00 [INF] Successfully published payment validation message: string
2025-06-23 16:30:25.577 +03:00 [INF] Received payment validation message: string for student string
2025-06-23 16:30:25.585 +03:00 [INF] Batch processing completed: 0 successful, 1 failed
2025-06-23 16:30:25.585 +03:00 [WRN] Payment validation failed with 2 errors: Payment reference must start with 'REF' and be at least 6 characters long, Payment amount must be greater than zero
2025-06-23 16:31:31.425 +03:00 [INF] ReconcilePayments endpoint called with 1 bank records
2025-06-23 16:31:31.438 +03:00 [INF] Reconciling payments with bank data
2025-06-23 16:31:31.460 +03:00 [INF] Reconciliation completed: 0 reconciled, 1 discrepancies
2025-06-23 16:32:29.511 +03:00 [INF] TestMessaging endpoint called
2025-06-23 16:32:29.524 +03:00 [INF] Publishing payment processed message: TEST-REF-001
2025-06-23 16:32:29.535 +03:00 [INF] Successfully published payment processed message: TEST-REF-001
2025-06-23 16:32:29.535 +03:00 [INF] Received payment processed message: TEST-REF-001 for student S12345
2025-06-23 16:32:29.542 +03:00 [WRN] Publishing payment failed message: TEST-REF-002, Reason: Test error reason
2025-06-23 16:32:29.543 +03:00 [INF] Payment processed successfully: Amount 5000, Student Active: true
2025-06-23 16:32:29.552 +03:00 [WRN] Received payment failed message: TEST-REF-002 for student S67890, Reason: Test error reason
2025-06-23 16:32:29.552 +03:00 [INF] Successfully published payment failed message: TEST-REF-002
2025-06-23 16:32:29.560 +03:00 [INF] Publishing payment validation message: TEST-REF-003
2025-06-23 16:32:29.559 +03:00 [WRN] Payment failed: Amount 3000, Error: Test error reason
2025-06-23 16:32:29.568 +03:00 [INF] Received payment validation message: TEST-REF-003 for student S66001
2025-06-23 16:32:29.568 +03:00 [INF] Successfully published payment validation message: TEST-REF-003
2025-06-23 16:32:29.575 +03:00 [WRN] Payment validation failed with 2 errors: Test validation error 1, Test validation error 2
